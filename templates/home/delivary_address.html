{% extends 'home/base.html'%} {% load widget_tweaks %}{% block content %}{% load static %} {% block css %}
<link rel="stylesheet" href="{% static 'home/css/delivary_address.css' %} " type="text/css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.min.css"> {% endblock %}

<div class="container">
    <!-- Customer Account Page Start  -->
    <div class="delivary_address mt-3">
        <div class="page-title">
            <h3>Delivary Address</h3>

        </div>
        <div class="row">
            <div class="col-md-5 col-12 d-none d-sm-block">
                <div class="my-profile">
                    <div class="row">
                        <div class="col-xs-2">
                            <a href="{% url 'profile_page' %}">
                                <img src="static/home/img/profile/download.png" alt="no-photo" class="user-profile-img">
                            </a>
                        </div>
                        <div class="col-xs-8">

                            <a href="{% url 'profile_page' %}">
                                <div class="customerfullname">
                                    {% if user.full_name %}
                                    <h3 style="font-weight: bold;">{{user.full_name}}</h3>
                                    {% else %}
                                    <h3 style="font-weight: bold;">{{user.first_name}} {{user.last_name}}</h3>
                                    {% endif %}
                                    <h6>{{user.email}}</h6>
                                    {% if user.mobile_number %}
                                    <h6>+91-{{user.mobile_number}}</h6>
                                    {% endif %}
                                </div>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-md-7 col-12">
                <div class="myaccountdetalis d-none d-sm-block">
                    <div class="row">
                        <div class="col-md-6 text-center">
                            <a href="{% url 'payment_method' %}" class="payment-order-img">
                                <i class="fa fa-credit-card fa-3x"></i>

                            </a><br/>
                            <a href="{% url 'payment_method' %}" class="payment-order-text">
                                      Payment Methods
                                   </a>


                        </div>
                        <div class="col-md-6 text-center">
                            <a href="{% url 'order_history' %}" class=" payment-order-img">
                                <i class="fa fa-shopping-bag fa-3x"></i>

                            </a><br/>
                            <a href="{% url 'order_history' %}" class="payment-order-text">
                                       Order Histrory
                                   </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!--Customer Account Information Page End -->

    <!-- Common Part Start Profile Page -->

    <div class="row">
        <div class="col-md-5 col-12 d-none d-sm-block">
            <div class="customlink">
                <div class="linkcontrol">
                    <a href="{% url 'wishlist' %}">
                        <i class="fa fa-heart"></i>
                        <span class="icon">WishList</span>
                    </a>
                    <a href="{% url 'legal_information' %}">
                        <i class="fa fa-gavel"></i>
                        <span class="icon ">Legal Information</span>
                    </a>
                    <a href="{% url 'faqs' %}">
                        <i class="fa fa-question-circle"></i>
                        <span class="icon ">FAQ's</span>
                    </a>
                    <a href="{% url 'contact_us' %}">
                        <i class="fa fa-phone"></i>
                        <span class="icon ">Contact Us</span>
                    </a>
                    <a href="">
                        <i class="fa fa-sign-out"></i>
                        <span class="icon ">Logout</span>
                    </a>
                </div>

            </div>

        </div>
        <div class="col-md-7 col-12 ">
            <div class="address-detalis">
                <h6>DELIVERY ADDRESS</h6>
                <div class="row">
                    <div class="col-md-6 ">
                        <a href="#fullHeightModalRight" data-target="#fullHeightModalRight" data-toggle="modal" class="add-address">+Add New Address</a>

                    </div>
                    <div class="col-md-6">

                    </div>

                </div>
            </div>
            {% if adds %} {% for add in adds%}
            <div class="address-detalis">
                <h6>ADDRESS {{forloop.counter|add:0}}</h6>
                <div class="row">
                    <div class="col-md-10">
                        <span id="name{{add.pk}}">{{add.full_name}}</span> , <span id="address{{add.pk}}">{{ add.address}}</span>, <span id="landmark{{add.pk}}">{{ add.landmark }}</span> , <span id="district{{add.pk}}">{{ add.district}}</span>,
                        <span id="state{{add.pk}}">{{ add.state }}</span> , <span id="pin{{add.pk}}">{{ add.pin_code}}</span>, <span id="mobile{{add.pk}}">{{ add.mobile_number}}</span>
                    </div>
                    <div class="col-md-2">
                        <div class="row">
                            <div class="col-md-2 ">
                                <p>
                                    <a class="edit_modal" data-toggle="modal" data-target="#edit_address" id="{{add.pk}}" style="font-size: large;padding-top:10px;padding-left:10px;"><span class="fa fa-edit" style="color:blue;"></span></a>
                                    <a class="delete_address" data-toggle="modal" data-target="#delete_address" id="delete{{add.pk}}" style="font-size:large;padding-top:10px;padding-left:10px;"><span class="fa fa-remove" style="color: red;"></span></a>
                                </p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>



            {% endfor %} {% else %}
            <div class="address-detalis">
                <h6> You have no addresses </h6>

            </div>
            {% endif %}


        </div>
    </div>

    <!-- Common Part Start Profile Page -->


</div>


<!-- Modal Add new Address -->
<!-- Full Height Modal Right -->
<div class="modal fade right" id="fullHeightModalRight" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

    <!-- Add class .modal-full-height and then add class .modal-right (or other classes from list above) to set a position to the modal -->
    <div class="modal-dialog modal-full-height modal-right" role="document">


        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title w-100" id="myModalLabel">Add New Address</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="{% url 'add_new_address' %}" method="POST" id="profileaddnewaddress">
                    {% csrf_token %}
                    <div class="form-group">

                        <input name="pin_code" class="form-control" placeholder="Pin Code" type="text" id="pin_code">
                    </div>
                    <!-- form-group// -->
                    <div class="form-group">

                        <input name="district" class="form-control" placeholder="District" type="text" id="district">
                    </div>
                    <!-- form-group// -->
                    <div class="form-group">

                        <input name="state" class="form-control" placeholder="State" type="text" id="state">
                    </div>
                    <!-- form-group// -->

                    <div class="form-group">

                        <input name="full_name" class="form-control" placeholder="Full Name" type="text" id="full_name">
                    </div>
                    <!-- form-group// -->
                    <div class="form-group">

                        <input name="address" class="form-control" placeholder="Address" type="text" id="address">
                    </div>
                    <!-- form-group// -->
                    <div class="form-group">

                        <input name="landmark" class="form-control" placeholder="LandMark" type="text" id="landmark">
                    </div>
                    <!-- form-group// -->
                    <div class="form-group" style="position: relative;">


                        <input name="mobile_number" class="form-control" placeholder="Phone Number" type="text" id="mobile_number" style="padding:5px 5px 5px 40px;">
                        <label for="youridhere" class="static-value" style="
                            position:absolute;
                            left:10px;
                            font-weight:bold;
                            font-size:0.8em;
                            color:#444;
                            top:9px;
                        ">+91:</label>
                    </div>
                    <!-- form-group// -->

                    <div class="modal-footer justify-content-center">

                        <button type="submit" class="btn btn-primary">Save Address</button>
                    </div>
                </form>

            </div>

        </div>
    </div>
</div>
<!-- Full Height Modal Right -->


<!-- Modal Edit Address -->
<!-- Full Height Modal Right -->
<div class="modal fade right" id="edit_address" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

    <!-- Add class .modal-full-height and then add class .modal-right (or other classes from list above) to set a position to the modal -->
    <div class="modal-dialog modal-full-height modal-right" role="document">


        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title w-100" id="myModalLabel1">Edit Address</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="#" method="POST" id="editDelivaryAddress">
                    {% csrf_token %}

                    <div class="form-group">

                        <input name="pin_code" class="form-control" placeholder="Pin Code" type="text" id="edit_pin_code">
                    </div>
                    <!-- form-group// -->
                    <div class="form-group">

                        <input name="district" class="form-control" placeholder="District" type="text" id="edit_district">
                    </div>
                    <!-- form-group// -->
                    <div class="form-group">

                        <input name="state" class="form-control" placeholder="State" type="text" id="edit_state">
                    </div>
                    <!-- form-group// -->

                    <div class="form-group">

                        <input name="full_name" class="form-control" placeholder="Full Name" type="text" id="edit_full_name">
                    </div>
                    <!-- form-group// -->
                    <div class="form-group">

                        <input name="address" class="form-control" placeholder="Address" type="text" id="edit_address_val">
                    </div>
                    <!-- form-group// -->
                    <div class="form-group">

                        <input name="landmark" class="form-control" placeholder="LandMark" type="text" id="edit_landmark">
                    </div>
                    <!-- form-group// -->
                    <div class="form-group" style="position: relative;">


                        <input name="mobile_number" class="form-control" placeholder="Phone Number" type="text" id="edit_mobile_number" style="padding:5px 5px 5px 40px;">
                        <label for="youridhere" class="static-value" style="
                            position:absolute;
                            left:10px;
                            font-weight:bold;
                            font-size:0.8em;
                            color:#444;
                            top:9px;
                        ">+91:</label>
                    </div>
                    <!-- form-group// -->



                    <div class="modal-footer justify-content-center">

                        <button type="submit" class="btn btn-primary">Update Address</button>
                    </div>
                </form>

            </div>

        </div>
    </div>
</div>




<div class="modal fade" id="delete_address" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <form action="{% url 'delete_address' %}" method="POST">
            {% csrf_token %}
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">DELETE ADDRESS</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
                </div>
                <div class="modal-body">
                    Do you want to delete this Address ?
                    <div style="width: 100%;background-color:wheat;border-radius:5px;text-align:center;">
                        <span id="dname"></span> , <span id="daddress"></span>, <span id="dlandmark"></span> , <span id="ddistrict"></span>,
                        <span id="dstate"></span> , <span id="dpin"></span>, <span id="dmobile"></span>
                    </div>
                    <input type="hidden" id="del_address_pk" name="del_address_pk">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">NO</button>
                    <button type="submit" class="btn btn-primary">YES</button>
                </div>
            </div>
        </form>
    </div>
</div>


<!-- end Modal Add new Address -->
{% endblock %} {% block javascript %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>
<script src="{% static 'home/js/delivary_address.js' %}"></script>
<script>
    $('.edit_modal').click(function() {
        id = this.id;
        full_name = document.getElementById("name" + id).innerText;
        address = document.getElementById("address" + id).innerText;
        landmark = document.getElementById("landmark" + id).innerText;
        district = document.getElementById("district" + id).innerText;
        state = document.getElementById("state" + id).innerText;
        pin = document.getElementById("pin" + id).innerText;
        mobile = document.getElementById("mobile" + id).innerText;
        console.log(address, district, state);

        $("#edit_pin_code").val(pin);
        $("#edit_district").val(district);
        $("#edit_state").val(state);
        $("#edit_full_name").val(full_name);
        $("#edit_address_val").val(address);
        $("#edit_landmark").val(landmark);
        $("#edit_mobile_number").val(mobile);
        $("#edit_address_pk1").val(id);
    });
</script>
<script>
    $(".delete_address").click(function() {
        id = this.id.slice(6, );
        console.log(id);
        full_name = document.getElementById("name" + id).innerText;
        address = document.getElementById("address" + id).innerText;
        landmark = document.getElementById("landmark" + id).innerText;
        district = document.getElementById("district" + id).innerText;
        state = document.getElementById("state" + id).innerText;
        pin = document.getElementById("pin" + id).innerText;
        mobile = document.getElementById("mobile" + id).innerText;
        console.log(full_name);

        document.getElementById('dname').innerHTML = full_name;
        document.getElementById('dpin').innerHTML = pin;
        document.getElementById('ddistrict').innerHTML = district;
        document.getElementById('dstate').innerHTML = state;
        document.getElementById('daddress').innerHTML = address;
        document.getElementById('dlandmark').innerHTML = landmark;
        document.getElementById('dmobile').innerHTML = mobile;
        $('#del_address_pk').val(id);



    });
</script>
{% endblock %}